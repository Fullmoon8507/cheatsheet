# JavaScript

## 実行方法

|              内容              |                      記載サンプル                       |               備考               |
| ------------------------------ | ------------------------------------------------------- | -------------------------------- |
| HTML直書き(scriptタグ内に記載) | `<script>alert("XXX")</script>`                         | headタグ or bodyタグ内に記載する |
| JSファイル読み込み             | `<script type="text/javascript" src="xxx.js"></script>` | (同上)                           |

※HTML読み込みを優先させるため、scriptタグはbodyタグ内の最後に記載するのが望ましい。

## 文法と型データ

### 宣言

| 項目  |                                  内容                                  |
| ----- | ---------------------------------------------------------------------- |
| var   | 変数を定義。再宣言は可能。関数外で宣言するとグローバルスコープとなる。 |
| let   | ブロックスコープの変数を宣言。再宣言は不可能。                         |
| const | ブロックスコープで名前付きの定数を宣言。値の変更は不可。               |

### データ型

|      分類      |   項目    |                        内容                        |
| -------------- | --------- | -------------------------------------------------- |
| プリミティブ型 | Boolean   | `true` or `false`                                  |
| プリミティブ型 | null      | `null`                                             |
| プリミティブ型 | undefined | 値が未定義。                                       |
| プリミティブ型 | Number    | 数値。整数 or 浮動小数点。                         |
| プリミティブ型 | BigInt    | 長整数。Numberよりも大きい数値など。               |
| プリミティブ型 | String    | 文字列。                                           |
| プリミティブ型 | Symbol    | シンボル。インスタンスが固有で不変となるデータ型。 |
| オブジェクト型 | Object    | オブジェクト。                                     |

### オブジェクト

- 名前(key)と値(value)を持つプロパティ(property)で構成される。
- JavaScriptはオブジェクトと連想配列の区別はない。
- `{}`で定義する。

```javascript
let x = {
    a: 1,
    b: "abc"
}
console.log(x.a)
console.log(x['b'])
```

### 関数の定義方法

|           項目           |                  記載サンプル                  |
| ------------------------ | ---------------------------------------------- |
| function命令             | function sum(a,b){return a+b}                  |
| Function()コンストラクタ | let sum = new Function('a', 'b', 'return a+b') |
| 関数リテラル             | let sum = function(a,b){return a+b}            |
| アロー関数               | let sum = (a,b) => {return a+b}                |

## アロー関数

関数リテラルを使った関数の定義を簡略化して記述することができる。

### 基本的な書き方

```javascript
let 変数名 = (引数１, 引数２, ...) => {
    処理;
    ...
    return 戻り値;
};
```

### 省略した書き方

引数が１だった場合、引数を囲むカッコを省略することができる。

```javascript
let 変数名 = 引数 => {
    処理;
    ...
    return 戻り値;
};
```

関数の処理がreturn文のみだった場合、ブロックを表すカッコとreturnを省略できる。

```javascript
let 変数名 = (引数１,引数２, ...) => 戻り値;
```

## ...演算子

引数時の配列を展開してくれる。

```javascript
let nums = [1, 2, 3, 4];
let sum = (num1,num2,num3,num4) => num1+num2+num3+num4;

console.log(sum(...nums));
```

## イベント

- ボタンやチェックボックスなど、生じた動作のこと。

### イベントハンドラ

- イベントが発生したときに呼び出される処理のこと。主なイベントハンドラは以下の通り。

| イベントハンドラ j|                  内容                  |
| ---------------- | -------------------------------------- |
| onClick          | クリック時                             |
| onChange         | フォームの選択や入力欄に変更があった時 |
| onFocus          | フォーカスが当たった時                 |
| onBlur           | フォーカスが外れた時                   |

### イベントハンドラの引数（thisとevent）

- thisはHTMLエレメントが渡され、eventはイベントオブジェクトが渡される。

|   比較項目   |                    this                    |                    evnet                    |
| ------------ | ------------------------------------------ | ------------------------------------------- |
| 渡し方       | `<input type="text" onChange="xxx(this)">` | `<input type="text" onChange="xxx(event)">` |
| 引数の中身   | HTMLエレメント                             | イベントオブジェクト                        |
| 引数の使い方 | `e.name` や `e.value` など                 | `e.target.value` や `e.type` など           |

## HTML DOM

### Element

#### プロパティ

|       項目        |                 内容                  | ReadWrite | 備考 |
| ----------------- | ------------------------------------- | --------- | ---- |
| Element.classList | class属性のリストが入ったDOMTokenList | ReadOnly  |      |
| Element.className | 要素のclass(文字列)                   |           |      |
| Element.id        | 要素のID                              |           |      |
| Element.children  | 要素の子要素                          | ReadOnly  |      |

### HTML Element

|      項目      |                          内容                          | 備考 |
| -------------- | ------------------------------------------------------ | ---- |
| Element.append | この要素内の最後にNodeオブジェクトまたは文字列を追加。 |      |
| Element.before | 要素の直前にNodeオブジェクトまたは文字列を追加。       |      |
| Element.after  | 要素の直後にNodeオブジェクトまたは文字列を追加。       |      |

#### プロパティ

|        項目         |            内容            | ReadWrite |                                             備考                                             |
| ------------------- | -------------------------- | --------- | -------------------------------------------------------------------------------------------- |
| HTMLElement.dataset | カスタムデータ属性(data-*) | ReadOnly  | 例えばタグで「data-target-id」と指定した場合、JSでは「XXX.dataset.targetid」でアクセスする。 |
| HTMLElement.hidden  | hidden属性                 |           | 表示：true、非表示；false                                                                    |

### メソッド

|        項目         |                内容                | 備考 |
| ------------------- | ---------------------------------- | ---- |
| HTMLElement.click() | 要素にマウスクリックイベントを送信 |      |
| HTMLElement.focus() | 要素にフォーカスを当てる           |      |
| HTMLElement.blur()  | 要素のフォーカスを外す             |      |
